<div class="submitJobContainer">
<mat-card class="submitJobCard">
<div *ngIf="sending" class="spinnerDiv">
    <mat-spinner></mat-spinner>
</div>
<form [formGroup]="formGroup" (ngSubmit)="submitForm()" novalidate [ngClass]="{'transparentForm' : sending}">
    <fieldset [disabled]="sending" style="border: 0ch;">
    <!-- Section 1: Input data -->
    <section>
      <h4>Input Data</h4>
      <div class="verticalInputSection">
        <h3>ssRNA*</h3>
            <label for="ssRNATextArea">Provide ssRNA sequence</label>
            <textarea [attr.disabled]="ssRNAFile? true : null" style="min-width: 450px; min-height: 100px; max-height: 300px;" id="ssRNATextArea" formControlName="ssRNATextual"></textarea>
            <label style="margin-top: 20px; margin-bottom: 10px;" for="ssRNAFileInput">or choose a file in FASTA format</label>
            <div class="fileInputSection">
                <button id="ssRNAFileInput" class="fileButton" type="button" mat-stroked-button (click)="fileInput.click()">Choose File</button>
                <input hidden formControlName="ssRNA" #fileInput type="file" (change)="onRnaChange($event)">
                <span class="file-name">{{pathToName(formGroup.value.ssRNA)}}</span>
                <mat-icon  (click)="reset_selected_ssRNA()" style="margin-left: 3px;  transform: scale(0.7); cursor: pointer;" *ngIf="pathToName(formGroup.value.ssRNA)" aria-hidden="false" fontIcon="highlight_off"></mat-icon>
            </div>
        </div>
      <div class="verticalInputSection">
            <h3>dsDNA*</h3>
            <div class="fileInputSection">
                <button class="fileButton" type="button" mat-stroked-button (click)="fileInput2.click()">Choose File</button>
                <input hidden formControlName="dsDNA" #fileInput2 type="file" (change)="onDnaChange($event)">
                <span class="file-name">{{pathToName(formGroup.value.dsDNA)}}</span>
                <mat-icon (click)="reset_selected_dsDNA()" style="margin-left: 3px; transform: scale(0.7); cursor: pointer;" *ngIf="pathToName(formGroup.value.dsDNA)" aria-hidden="false" fontIcon="highlight_off"></mat-icon>
            </div>
        </div>
    </section>
  
    <!-- Section 2: Job info -->
    <section>
      <h4>Job Info</h4>
      <p class="notTooBig">
        You can write your email to receive a notification once the job is completed and to retrieve your previous jobs; you can also name your job to easily identify it.
      </p>
      <mat-form-field class="smallInput">
        <mat-label>Job Name</mat-label>
        <input matInput formControlName="jobName">
      </mat-form-field>
      <mat-form-field class="smallInput">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email">
      </mat-form-field>
    </section>
  
    <!-- Section 3: 3plex parameters -->
    <section>
        <mat-accordion>
            <mat-expansion-panel style="max-width: 650px;" class="mat-elevation-z0">
              <mat-expansion-panel-header>
                    <mat-panel-title>
                    <span class="right">Additional 3plex parameters</span>
                    </mat-panel-title>
              </mat-expansion-panel-header>

            <mat-list role="list">
                <mat-list-item style="height:50px !important" class="line" role="listitem">
                    <div class="row">
                        <p>Min len</p>
                        <mat-form-field class="smallInput">
                            <input matInput type="number" formControlName="min_len" placeholder="default">
                        </mat-form-field>
                    </div>
                </mat-list-item>
                <mat-list-item style="height:50px !important" class="line" role="listitem">
                    <div class="row">
                        <p>Max len</p>
                        <mat-form-field class="smallInput">
                            <input matInput type="number" formControlName="max_len" placeholder="default">
                        </mat-form-field>
                    </div>
                </mat-list-item>
                <mat-list-item style="height:50px !important" class="line" role="listitem">
                    <div class="row">
                        <p>Error rate</p>
                        <mat-form-field class="smallInput">
                            <input matInput type="number" formControlName="error_rate" placeholder="default">
                        </mat-form-field>
                    </div>
                </mat-list-item>
            <mat-list-item style="height:50px !important" class="line" role="listitem">
                <div class="row">
                    <p>Guanine len</p>
                    <mat-form-field class="smallInput">
                        <input matInput type="number" formControlName="guanine_rate" placeholder="default">
                    </mat-form-field>
                </div>
            </mat-list-item>
            <mat-list-item style="height:50px !important" class="line" role="listitem">
                <div class="row">
                    <p>Consecutive errors</p>
                    <mat-form-field class="smallInput">
                        <input matInput type="number" formControlName="consecutive_errors" placeholder="default">
                    </mat-form-field>
                </div>
            </mat-list-item>
            <mat-list-item style="height:50px !important" class="line" role="listitem">
                <div class="row">
                    <p>SSTRAND</p>
                    <mat-form-field class="smallInput">
                        <input matInput type="number" formControlName="SSTRAND" placeholder="default">
                    </mat-form-field>
                </div>
            </mat-list-item>
            <!--Filter repeat on off-->
            <mat-list-item style="height:50px !important" class="line" role="listitem">
                <div class="row">
                    <p>Guanine rate</p>
                    <mat-button-toggle-group formControlName="guanine_rate" name="fontStyle" aria-label="Font Style" style="margin-right: 20px;">
                        <mat-button-toggle value="on">On</mat-button-toggle>
                        <mat-button-toggle value="off">Off</mat-button-toggle>
                    </mat-button-toggle-group>
                </div>
            </mat-list-item>
            <mat-list-item style="height:50px !important" class="line" role="listitem">
                <div class="row">
                    <p style="font-weight: 50;">Reset all to default</p>
                    <button type="button" mat-stroked-button (click)="reset_triplex_params()">Reset</button>
                </div>
            </mat-list-item>
            </mat-list>
            

    </mat-expansion-panel>
    </mat-accordion>
    </section>

    <div style="margin-top: 15px; width:100%; display:flex; justify-content: end;">
        <button mat-raised-button type="submit" style="margin-right: 15px;">Submit job</button>
    </div>
</fieldset>
  </form>
</mat-card>
</div>